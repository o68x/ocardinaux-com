---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import Section from "../components/Section.astro";
import ScreenshotSlider from "../components/ScreenshotSlider.astro";
import Footer from "../components/Footer.astro";
import RawSvg from "../components/RawSvg.astro";
import fig34 from "../assets/images/physics-fig-34.webp";
import fig11 from "../assets/images/physics-fig-11.webp";
import fig27 from "../assets/images/physics-fig-27.webp";
import fig50 from "../assets/images/physics-fig-50.webp";
import "../styles/tippy.css";
---

<Layout title="ocardinaux.com">
  <main>
    <Hero />

    <Section id="construction">
      <Image src={fig34} alt="" width="240" />
      <Image src={fig50} alt="" slot="separator" width="240" />
    </Section>

    <div class="swiper-outer">
      <ScreenshotSlider />
    </div>

    <Section id="contact">
      <Image src={fig11} alt="" width="240" />
      <Image src={fig27} alt="" slot="separator" width="240" />
    </Section>
  </main>

  <div class="footer-separator">
    <RawSvg className="footer-separator-svg" svgFile="paper-tear" />
  </div>

  <Footer />
</Layout>

<style>
  .swiper-outer {
    width: 100%;
    max-width: none;
    position: relative;

    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background-color: var(--color-light-bone);
      transform: skewY(-2deg);
    }

    &::after {
      content: "";
      position: absolute;
      top: 90%;
      bottom: 8px;
      width: 100%;
      background-color: red;
      transform: skewY(-2deg) rotate(0.35deg);
      box-shadow: var(--shadow-3);
      z-index: -1;
    }
  }
</style>

<script>
  // Obfuscate email
  const email = document.querySelector("#email");
  const user = "olivier";
  const domain = "ocardinaux.com";
  if (email)
    email.innerHTML = `<a href='mailto:${user}@${domain}?subject=Mon site'>${user}@${domain}</a>`;

  // Obfuscate tel number (useful?)
  const tel = document.querySelector("#tel");
  const telNumber = "+33689638014";
  const telText = "06 89 63 80 14";
  if (tel) tel.innerHTML = `<a href='tel:${telNumber}'>${telText}</a>`;
</script>
